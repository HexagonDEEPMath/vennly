<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venn Diagram - Custom Quiz</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
        }
        .rect-clickable, path {
            stroke: black;
            stroke-width: 1;
            fill: white;
        }
        .clicked {
            fill: green !important; /* ‚úÖ ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß */
        }
        .correct {
            fill: rgba(255, 255, 0, 0.5) !important; /* ‚úÖ ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
        }
        text {
            font-size: 12px;
            font-weight: bold;
            fill: black;
            text-anchor: middle;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <h2>Venn Diagram Quiz</h2>
    <p id="question-number">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
    <p id="question">‡πÇ‡∏à‡∏ó‡∏¢‡πå: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
    <p id="status">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå</p>

    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="50%" width="50%" viewBox="0 0 120 120">
        <rect class="rect-clickable" x="0" y="0" width="120" height="120" onclick="toggleColor(this, 0)" />

        <path d="M 60 20 A 30 30 0 1 0 31 71 30 30 0 0 1 51 48 30 30 0 0 1 60 20" onclick="toggleColor(this, 1)" />
        <path d="M 60 20 A 30 30 0 0 0 51 48 30 30 0 0 1 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 2)" />
        <path d="M 60 20 A 30 30 0 1 1 89 71 30 30 0 0 0 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 4)" />
        <path d="M 60 64 A 30 30 0 0 1 31 71 30 30 0 0 1 51 48 30 30 0 0 0 60 64" onclick="toggleColor(this, 8)" />
        <path d="M 60 64 A 30 30 0 0 1 51 48 30 30 0 0 1 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 16)" />
        <path d="M 60 64 A 30 30 0 0 0 89 71 30 30 0 0 0 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 32)" />
        <path d="M 31 71 A 30 30 0 1 0 89 71 30 30 0 0 1 60 64 30 30 0 0 1 31 71" onclick="toggleColor(this, 64)" />

        <text x="45" y="45">A</text>
        <text x="75" y="45">B</text>
        <text x="60" y="75">C</text>
    </svg>

    <br>
    <button onclick="submitAnswer()">Submit</button>
    <button onclick="showAnswer()">Show Answer</button>

    <script>
        let selectedState = 0;
        let questions = [];
        let currentIndex = 0;

        async function loadQuestions() {
            try {
                let response = await fetch("questions.json");
                questions = await response.json();
                showQuestion();
            } catch (error) {
                console.error("Error loading questions:", error);
                document.getElementById("question").innerText = "‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚ùå";
            }
        }

        function showQuestion() {
            if (currentIndex >= questions.length) {
                document.getElementById("question-number").innerText = "‡∏à‡∏ö‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‚úÖ";
                document.getElementById("question").innerText = "‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß!";
                return;
            }
            
            let currentQuestion = questions[currentIndex];

            document.getElementById("question-number").innerText = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${currentIndex + 1} / ${questions.length}`;
            document.getElementById("question").innerText = `‡πÇ‡∏à‡∏ó‡∏¢‡πå: ${currentQuestion.text}`;
            document.getElementById("status").innerText = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå";

            selectedState = 0;
            resetColors();
        }

        function toggleColor(element, value) {
            if (element.classList.contains("correct")) {
                element.classList.remove("correct"); // ‚úÖ ‡∏•‡∏ö‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
                element.classList.add("clicked");   // ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
                selectedState |= value; // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ selectedState
            } else if (element.classList.contains("clicked")) {
                element.classList.remove("clicked"); // ‚úÖ ‡∏•‡∏ö‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏ß
                selectedState &= ~value; // ‚úÖ ‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å selectedState
            } else {
                element.classList.add("clicked"); // ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
                selectedState |= value; // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ selectedState
            }
        }

        function resetColors() {
            document.querySelectorAll(".rect-clickable, path").forEach(el => {
                el.classList.remove("clicked", "correct");
            });
            selectedState = 0;
        }

        function submitAnswer() {
            if (currentIndex >= questions.length) return;
            
            let correctAnswer = questions[currentIndex].answer.reduce((acc, val) => acc | val, 0);

            if (selectedState === correctAnswer) {
                document.getElementById("status").innerText = "‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!";
                currentIndex++;
                setTimeout(showQuestion, 1000);
            } else {
                document.getElementById("status").innerText = "‚ùå ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!";
            }
        }

        function showAnswer() {
            if (currentIndex >= questions.length) return;

            let correctAnswer = questions[currentIndex].answer;
            resetColors(); // ‚úÖ ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏ß‡∏Å‡πà‡∏≠‡∏ô

            document.querySelectorAll(".rect-clickable, path").forEach(el => {
                let value = parseInt(el.getAttribute("onclick").match(/\d+/)[0]);
                if (correctAnswer.includes(value)) {
                    el.classList.add("correct"); // ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á
                }
            });

            document.getElementById("status").innerText = "üîç ‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏•‡πâ‡∏ß! (‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÑ‡∏î‡πâ)";
        }

        window.onload = loadQuestions;
    </script>

</body>
</html>